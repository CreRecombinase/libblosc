.PHONY: all libblosc

all: copying $(SHLIB)

$(SHLIB): libblosc

libblosc:
	cd hdf5-blosc/build && \
	  cmake --build . --target install
	  echo "done compiling!"

copying: libblosc
	mkdir -p "${R_PACKAGE_DIR}/include"
	pwd
	sleep 0.5 &&\
	cp -L blosc/lib/libblosc*  . &&\
	cp -L blosc_f/lib/*  .  &&\
	cp blosc_f/include/*.h "${R_PACKAGE_DIR}/include" &&\
	cp blosc/include/*.h "${R_PACKAGE_DIR}/include";
clean:
	cd hdf5-blosc/build && $(MAKE) -fMakefile clean && cd ..; \
